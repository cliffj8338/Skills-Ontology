<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blueprint‚Ñ¢ Scouting Report ‚Äî Tyrion Lannister | United Nations</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<style>
:root{--bg:#0a0e1a;--card:#111827;--elev:#1a2035;--border:rgba(255,255,255,0.06);--ba:rgba(96,165,250,0.25);--a:#3b82f6;--ag:rgba(96,165,250,0.15);--g:#10b981;--am:#f59e0b;--r:#ef4444;--p:#6366f1;--t1:#f1f5f9;--t2:#94a3b8;--tm:#64748b;--rad:14px;--rs:8px;--nav-bg:rgba(10,14,26,0.85);--tt-bg:rgba(26,26,46,0.98);--link-c:rgba(148,163,184,0.25);--net-txt-shadow:0 1px 3px rgba(0,0,0,.7)}
html.light{--bg:#f8fafc;--card:#ffffff;--elev:#f1f5f9;--border:rgba(0,0,0,0.08);--ba:rgba(59,130,246,0.2);--a:#2563eb;--ag:rgba(59,130,246,0.08);--g:#059669;--am:#d97706;--r:#dc2626;--p:#4f46e5;--t1:#0f172a;--t2:#475569;--tm:#94a3b8;--nav-bg:rgba(248,250,252,0.88);--tt-bg:rgba(255,255,255,0.98);--link-c:rgba(100,116,139,0.25);--net-txt-shadow:0 1px 2px rgba(255,255,255,.5)}
html.light .strip{background:rgba(59,130,246,0.04)}
html.light .narr{background:linear-gradient(135deg,rgba(59,130,246,0.04),rgba(79,70,229,0.02))}
html.light .photo{box-shadow:0 0 0 3px var(--bg),0 0 0 5px rgba(59,130,246,0.2)}
html.light .net-w svg .link{stroke:rgba(100,116,139,0.2)}
html.light .ring-pct{color:var(--g)}
html.light .blind-fab{background:var(--card);box-shadow:0 2px 8px rgba(0,0,0,.1)}
html.light .theme-toggle{background:var(--card);box-shadow:0 2px 8px rgba(0,0,0,.1)}
html.light ::-webkit-scrollbar-thumb{background:rgba(0,0,0,.12)}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth;background:var(--bg);color:var(--t1);font-family:'Outfit',sans-serif}
body{min-height:100vh;-webkit-font-smoothing:antialiased;padding-bottom:72px}

.nav{position:sticky;top:0;z-index:100;background:var(--nav-bg);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 24px;display:flex;align-items:center;justify-content:space-between;height:52px}
.nav-brand{display:flex;align-items:center;gap:8px;font-weight:700;font-size:.85em;color:var(--t2);letter-spacing:.08em;text-transform:uppercase}
.nav-links{display:flex;gap:4px;overflow-x:auto;scrollbar-width:none}.nav-links::-webkit-scrollbar{display:none}
.nav-a{padding:6px 14px;border-radius:20px;font-size:.72em;font-weight:500;color:var(--tm);cursor:pointer;white-space:nowrap;transition:all .2s}
.nav-a:hover,.nav-a.on{color:var(--a);background:var(--ag)}

.theme-toggle{width:36px;height:36px;border-radius:50%;border:1px solid var(--border);background:var(--card);color:var(--t2);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;flex-shrink:0}
.theme-toggle:hover{border-color:var(--a);color:var(--a)}

.strip{background:rgba(96,165,250,0.06);border-bottom:1px solid var(--border);padding:6px 24px;display:flex;align-items:center;justify-content:center;gap:8px;font-size:.7em;color:var(--tm);flex-wrap:wrap}
.wrap{max-width:960px;margin:0 auto;padding:0 24px}

/* Hero */
.hero{padding:48px 0 40px}.hero-grid{display:grid;grid-template-columns:auto 1fr auto;gap:28px;align-items:center;margin-bottom:32px}
.photo{width:88px;height:88px;border-radius:50%;background:linear-gradient(135deg,var(--a),var(--p));display:flex;align-items:center;justify-content:center;font-size:40px;box-shadow:0 0 0 3px var(--bg),0 0 0 5px rgba(96,165,250,0.2)}
.hero h1{font-size:1.8em;font-weight:800;line-height:1.15;margin-bottom:4px}
.hero-sub{font-size:.95em;color:var(--t2);margin-bottom:6px}
.hero-meta{display:flex;gap:16px;font-size:.78em;color:var(--tm);flex-wrap:wrap}
.hero-meta span{display:flex;align-items:center;gap:4px}
.ring{width:100px;height:100px;position:relative;flex-shrink:0}
.ring svg{width:100%;height:100%;transform:rotate(-90deg)}
.ring-label{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.ring-pct{font-size:1.8em;font-weight:900;color:var(--g);line-height:1}
.ring-word{font-size:.6em;color:var(--tm);text-transform:uppercase;letter-spacing:.1em;font-weight:600}

.target{background:var(--card);border:1px solid var(--border);border-radius:var(--rad);padding:20px 24px;margin-bottom:24px;display:flex;align-items:center;justify-content:space-between;gap:16px}
.target-lbl{font-size:.7em;color:var(--a);text-transform:uppercase;letter-spacing:.1em;font-weight:600;margin-bottom:4px}
.target-role{font-size:1.15em;font-weight:700}
.target-co{font-size:.88em;color:var(--t2);margin-top:2px}
.target-stats{display:flex;gap:20px;flex-shrink:0}
.tstat{text-align:center}
.tstat-n{font-size:1.5em;font-weight:800;line-height:1.1}
.tstat-l{font-size:.65em;color:var(--tm);text-transform:uppercase;letter-spacing:.06em}

.narr{background:linear-gradient(135deg,rgba(96,165,250,0.06),rgba(99,102,241,0.04));border:1px solid var(--ba);border-radius:var(--rad);padding:24px 28px;margin-bottom:24px;line-height:1.7;font-size:.95em;color:var(--t2)}
.narr strong{color:var(--t1);font-weight:600}
.narr-lbl{font-size:.68em;color:var(--a);text-transform:uppercase;letter-spacing:.1em;font-weight:600;margin-bottom:10px;display:flex;align-items:center;gap:6px}
.purpose{padding:16px 0 0;font-size:.88em;color:var(--tm);font-style:italic;text-align:center;border-top:1px solid var(--border)}
.purpose::before{content:'\201C';font-size:1.6em;color:var(--a);vertical-align:-4px;margin-right:4px}

/* Sections */
.sec{padding:40px 0;border-top:1px solid var(--border)}
.sec-h{display:flex;align-items:center;gap:10px;margin-bottom:24px}
.sec-ico{width:32px;height:32px;border-radius:8px;background:var(--ag);display:flex;align-items:center;justify-content:center;color:var(--a);flex-shrink:0}
.sec-t{font-size:1.2em;font-weight:700}
.sec-st{font-size:.78em;color:var(--tm)}

/* Network */
.net-w{position:relative;width:100%;background:var(--card);border:1px solid var(--border);border-radius:var(--rad);overflow:hidden;margin-bottom:16px}
.net-w svg{display:block;width:100%}
.net-w svg text{font-family:'Outfit',sans-serif;pointer-events:none;text-shadow:var(--net-txt-shadow)}
.net-w svg .link{stroke:rgba(255,255,255,.1)}
.net-w svg .hidden{display:none}
.net-leg{position:absolute;bottom:12px;left:12px;background:var(--tt-bg);backdrop-filter:blur(12px);border:1px solid var(--border);border-radius:10px;padding:10px 14px;font-size:.72em;display:flex;gap:12px;flex-wrap:wrap}
.net-leg-i{display:flex;align-items:center;gap:5px;color:var(--tm)}
.net-leg-d{width:8px;height:8px;border-radius:50%}
.viz-hint{text-align:center;font-size:.72em;color:var(--tm);padding:8px 0 0}

/* Network mode toggle */
.net-toggle{display:flex;gap:4px;margin-bottom:14px;background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:10px;padding:3px;width:fit-content}
.net-toggle-btn{padding:7px 18px;border-radius:8px;border:none;background:transparent;color:var(--tm);font-family:'Outfit',sans-serif;font-size:.78em;font-weight:500;cursor:pointer;transition:all .2s}
.net-toggle-btn.on{background:var(--ag);color:var(--a);font-weight:600}
.net-toggle-btn:hover:not(.on){color:var(--t2)}

/* Verified badge */
.vb{display:inline-flex;align-items:center;gap:3px;font-size:.65em;font-weight:600;padding:2px 8px;border-radius:10px;background:rgba(16,185,129,.1);color:var(--g);border:1px solid rgba(16,185,129,.15);vertical-align:middle;margin-left:6px;letter-spacing:.02em}
.vb svg{flex-shrink:0}
.vb.cert{background:rgba(96,165,250,.1);color:var(--a);border-color:rgba(96,165,250,.15)}
.vb.edu{background:rgba(168,85,247,.1);color:#a855f7;border-color:rgba(168,85,247,.15)}

/* Credentials grid */
.cred-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.cred-col-h{font-size:.72em;color:var(--tm);text-transform:uppercase;letter-spacing:.08em;font-weight:600;margin-bottom:10px;display:flex;align-items:center;gap:6px}
.cred-item{background:var(--card);border:1px solid var(--border);border-radius:var(--rs);padding:14px 16px;margin-bottom:8px;transition:border-color .2s}
.cred-item:hover{border-color:var(--ba)}
.cred-name{font-weight:600;font-size:.9em;margin-bottom:2px;display:flex;align-items:center;gap:6px}
.cred-org{font-size:.8em;color:var(--t2)}
.cred-meta{font-size:.72em;color:var(--tm);margin-top:4px;display:flex;gap:10px;flex-wrap:wrap}
.cred-skills{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px}
.cred-skill-tag{font-size:.68em;padding:2px 8px;border-radius:10px;background:rgba(255,255,255,.03);color:var(--tm);border:1px solid var(--border)}

/* Blind mode */
.blind-fab{position:fixed;top:60px;right:16px;z-index:90;width:40px;height:40px;border-radius:50%;background:var(--card);border:1px solid var(--border);color:var(--tm);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;box-shadow:0 4px 16px rgba(0,0,0,.3)}
.blind-fab:hover{border-color:var(--a);color:var(--a);background:var(--ag)}
.blind-fab.active{border-color:var(--am);color:var(--am);background:rgba(245,158,11,.1)}
.blind-panel{display:none;position:fixed;top:108px;right:16px;z-index:90;background:var(--elev);border:1px solid var(--border);border-radius:var(--rad);padding:20px;width:280px;box-shadow:0 8px 32px rgba(0,0,0,.4)}
.blind-panel.open{display:block}
.blind-panel-h{font-size:.9em;font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:6px}
.blind-panel-sub{font-size:.72em;color:var(--tm);margin-bottom:14px;line-height:1.5}
.blind-row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border)}
.blind-row:last-child{border-bottom:none}
.blind-row-label{font-size:.82em;font-weight:500}
.blind-toggle{position:relative;width:36px;height:20px;background:rgba(255,255,255,.08);border-radius:10px;cursor:pointer;transition:background .2s;flex-shrink:0}
.blind-toggle.on{background:var(--am)}
.blind-toggle::after{content:'';position:absolute;top:2px;left:2px;width:16px;height:16px;border-radius:50%;background:#fff;transition:transform .2s}
.blind-toggle.on::after{transform:translateX(16px)}
.blind-actions{margin-top:12px;display:flex;gap:8px}
.blind-apply{flex:1;padding:8px;border-radius:8px;border:none;background:var(--am);color:#000;font-family:'Outfit',sans-serif;font-size:.78em;font-weight:600;cursor:pointer}
.blind-reset{flex:1;padding:8px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--tm);font-family:'Outfit',sans-serif;font-size:.78em;cursor:pointer}

/* Blinded content states */
.blinded-name{filter:blur(8px);user-select:none;pointer-events:none;transition:filter .3s}
.blinded-text{position:relative}
.blinded-text::after{content:'REDACTED';position:absolute;inset:0;background:var(--card);color:var(--am);display:flex;align-items:center;justify-content:center;font-size:.75em;font-weight:700;letter-spacing:.12em;border-radius:4px;border:1px dashed rgba(245,158,11,.3)}
.blinded-photo{filter:blur(16px) saturate(0);transition:filter .3s}
.blinded-loc{display:none !important}
.blinded-strip{background:rgba(245,158,11,.08) !important;border-color:rgba(245,158,11,.15) !important}
.blinded-strip::after{content:' ‚Ä¢ Blind Mode Active';color:var(--am);font-weight:600}

@media(max-width:768px){
.cred-grid{grid-template-columns:1fr}
.blind-panel{right:8px;left:8px;width:auto}
}

/* Tooltip */
.tt{position:absolute;background:var(--tt-bg);border:1px solid var(--a);border-radius:8px;padding:12px 14px;pointer-events:none;opacity:0;transition:opacity .15s;max-width:300px;font-size:12px;z-index:500;box-shadow:0 8px 24px rgba(0,0,0,.2)}
.tt-t{font-weight:700;color:var(--a);margin-bottom:4px;font-size:13px}
.tt-s{color:var(--t2);font-size:11px;line-height:1.5}

/* Popover */
.pop{display:none;background:var(--elev);border:1px solid var(--ba);border-radius:var(--rad);padding:20px 24px;margin-bottom:16px}
.pop.open{display:block}
.pop-h{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.pop-n{font-size:1em;font-weight:700}
.pop-x{background:none;border:none;color:var(--tm);cursor:pointer;font-size:1.2em}
.pop-b{font-size:.88em;color:var(--t2);line-height:1.65}
.pop-ev{margin-top:10px;padding:10px 14px;background:rgba(255,255,255,.02);border-radius:var(--rs);border-left:2px solid var(--a)}
.pop-ev-l{font-size:.7em;color:var(--a);font-weight:600;text-transform:uppercase;letter-spacing:.06em;margin-bottom:4px}

/* Skill rows */
.sk-list{display:flex;flex-direction:column;gap:6px}
.sk-r{background:var(--card);border:1px solid var(--border);border-radius:var(--rs);padding:14px 18px;cursor:pointer;transition:all .2s}
.sk-r:hover{border-color:var(--ba);background:var(--elev)}
.sk-r.ex{border-color:var(--ba);background:var(--elev)}
.sk-top{display:flex;align-items:center;gap:12px}
.sk-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.sk-nm{font-weight:600;font-size:.9em;flex:1;min-width:0}
.sk-rq{font-size:.68em;padding:2px 8px;border-radius:10px;background:rgba(255,255,255,.04);color:var(--tm);white-space:nowrap}
.sk-bars{flex-shrink:0;width:100px}
.sk-bar-r{display:flex;align-items:center;gap:6px;font-size:.65em;color:var(--tm)}
.sk-bar-t{flex:1;height:4px;background:rgba(255,255,255,.06);border-radius:2px;overflow:hidden}
.sk-bar-f{height:100%;border-radius:2px}
.sk-chev{color:var(--tm);font-size:.8em;transition:transform .2s;flex-shrink:0;margin-left:8px}
.sk-r.ex .sk-chev{transform:rotate(180deg)}
.sk-det{display:none;padding:14px 0 4px 20px;margin-top:12px;border-top:1px solid var(--border);font-size:.85em;color:var(--t2);line-height:1.65}
.sk-r.ex .sk-det{display:block}
.sk-ev{margin-top:8px;padding:10px 14px;background:rgba(255,255,255,.02);border-radius:var(--rs);border-left:2px solid var(--a)}
.sk-ev-l{font-size:.72em;color:var(--a);font-weight:600;text-transform:uppercase;letter-spacing:.06em;margin-bottom:4px}

/* Gaps */
.gap-c{background:var(--card);border:1px solid rgba(239,68,68,.15);border-radius:var(--rad);padding:18px 20px;margin-bottom:8px}
.gap-h{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.gap-n{font-weight:600;font-size:.9em;color:var(--r)}
.gap-br{font-size:.82em;color:var(--t2);line-height:1.6}
.gap-adj{display:flex;flex-wrap:wrap;gap:6px;margin-top:10px}
.gap-tag{font-size:.72em;padding:3px 10px;border-radius:12px;background:rgba(16,185,129,.1);color:var(--g);border:1px solid rgba(16,185,129,.15)}

/* Values score */
.val-sc{text-align:center;margin-bottom:20px}
.val-sc-n{font-size:2.4em;font-weight:900;color:var(--g)}
.val-sc-l{font-size:.78em;color:var(--tm)}

/* Outcomes */
.outc{background:var(--card);border:1px solid var(--border);border-radius:var(--rad);padding:18px 22px;margin-bottom:8px}
.outc-t{font-size:.9em;line-height:1.6;color:var(--t2)}
.outc-m{display:inline;font-weight:700;color:var(--a)}

/* Teaser */
.teaser{background:var(--card);border:1px solid var(--border);border-radius:var(--rad);padding:32px 28px;text-align:center;position:relative;overflow:hidden}
.teaser::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(255,255,255,.008) 10px,rgba(255,255,255,.008) 20px);pointer-events:none}

/* Prof grid */
.pgrid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:24px}
.pcard{background:var(--card);border:1px solid var(--border);border-radius:var(--rs);padding:14px;text-align:center}
.pcard-n{font-size:1.5em;font-weight:800;line-height:1.1}
.pcard-l{font-size:.65em;color:var(--tm);text-transform:uppercase;letter-spacing:.06em;margin-top:2px}

/* Domain */
.dom-r{display:flex;align-items:center;gap:14px;padding:10px 0;border-bottom:1px solid var(--border)}
.dom-n{font-size:.85em;font-weight:600;min-width:160px}
.dom-bt{flex:1;height:6px;background:rgba(255,255,255,.04);border-radius:3px;overflow:hidden}
.dom-bf{height:100%;border-radius:3px}
.dom-c{font-size:.78em;color:var(--tm);min-width:60px;text-align:right}

/* Comm bar */
.cbar{position:fixed;bottom:0;left:0;right:0;background:var(--nav-bg);backdrop-filter:blur(20px);border-top:1px solid var(--border);padding:12px 24px;z-index:100;display:flex;align-items:center;justify-content:center;gap:12px}
.rbtn{padding:8px 16px;border-radius:20px;border:1px solid var(--border);background:var(--card);color:var(--t2);font-family:'Outfit',sans-serif;font-size:.78em;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
.rbtn:hover{border-color:var(--a);color:var(--a);background:var(--ag)}
.rbtn.sel{border-color:var(--g);color:var(--g);background:rgba(16,185,129,.1)}
.nbtn{padding:8px 20px;border-radius:20px;border:1px solid var(--a);background:var(--a);color:#fff;font-family:'Outfit',sans-serif;font-size:.78em;font-weight:600;cursor:pointer}
.sbtn{padding:8px 16px;border-radius:20px;border:1px solid var(--border);background:transparent;color:var(--tm);font-family:'Outfit',sans-serif;font-size:.78em;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:6px}
.nmod{display:none;position:fixed;inset:0;z-index:200;background:rgba(0,0,0,.4);backdrop-filter:blur(8px);align-items:center;justify-content:center;padding:24px}
.nmod.open{display:flex}
.nbox{background:var(--elev);border:1px solid var(--border);border-radius:var(--rad);padding:28px;width:100%;max-width:480px}
.nbox h3{font-size:1.1em;font-weight:700;margin-bottom:16px}
.nta{width:100%;min-height:100px;background:var(--card);border:1px solid var(--border);border-radius:var(--rs);padding:14px;color:var(--t1);font-family:'Outfit',sans-serif;font-size:.9em;resize:vertical;outline:none}
.nta:focus{border-color:var(--a)}
.nacts{display:flex;justify-content:flex-end;gap:10px;margin-top:14px}

@media(max-width:768px){
.hero-grid{grid-template-columns:auto 1fr;gap:16px}
.ring{grid-column:1/-1;justify-self:center;order:-1}
.target{flex-direction:column;gap:16px;text-align:center}
.target-stats{justify-content:center}
.nav-links{display:none}
.sk-bars{width:70px}
.pgrid{grid-template-columns:repeat(3,1fr)}
.cbar{flex-wrap:wrap;padding:10px 16px;gap:8px}
.hero h1{font-size:1.4em}
.dom-n{min-width:100px}
}
</style>
</head>
<body>

<nav class="nav">
<div class="nav-brand"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" opacity=".6"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>Blueprint‚Ñ¢</div>
<div class="nav-links">
<a class="nav-a on" onclick="go('hero')">Overview</a>
<a class="nav-a" onclick="go('snet')">Skills Map</a>
<a class="nav-a" onclick="go('creds')">Credentials</a>
<a class="nav-a" onclick="go('skills')">Alignment</a>
<a class="nav-a" onclick="go('gaps')">Gaps</a>
<a class="nav-a" onclick="go('vnet')">Values Map</a>
<a class="nav-a" onclick="go('outcomes')">Outcomes</a>
<a class="nav-a" onclick="go('domains')">Domains</a>
<a class="nav-a" onclick="go('comp')">Comp</a>
</div><button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Toggle light/dark mode"><svg id="themeIcon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></button>
</nav>
<div class="strip"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>Confidential ‚Äî Prepared for the hiring team at <strong style="color:var(--t2);margin:0 3px">United Nations</strong><span style="margin-left:auto;opacity:.6">Feb 22, 2026</span></div>

<div class="tt" id="tip"></div>

<div class="wrap">

<!-- HERO -->
<section class="hero" id="hero">
<div class="hero-grid">
<div class="photo">üç∑</div>
<div>
<h1>Tyrion Lannister</h1>
<div class="hero-sub">Hand of the King & Strategic Advisor</div>
<div class="hero-meta"><span>üìç King's Landing, Westeros</span><span>üìû Available upon request</span></div>
</div>
<div class="ring"><svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="42" fill="none" stroke="rgba(255,255,255,.06)" stroke-width="6"/><circle cx="50" cy="50" r="42" fill="none" stroke="#10b981" stroke-width="6" stroke-dasharray="226.2" stroke-dashoffset="56.5" stroke-linecap="round"/></svg><div class="ring-label"><div class="ring-pct">75%</div><div class="ring-word">Match</div></div></div>
</div>
<div class="target"><div><div class="target-lbl">Target Role</div><div class="target-role">Chief of Staff to the Secretary-General</div><div class="target-co">United Nations</div></div>
<div class="target-stats"><div class="tstat"><div class="tstat-n" style="color:var(--a)">26</div><div class="tstat-l">Skills</div></div><div class="tstat"><div class="tstat-n" style="color:var(--g)">6</div><div class="tstat-l">Matched</div></div><div class="tstat"><div class="tstat-n" style="color:var(--r)">2</div><div class="tstat-l">Gaps</div></div><div class="tstat"><div class="tstat-n" style="color:var(--tm)">20</div><div class="tstat-l">Surplus</div></div></div></div>
<div class="narr"><div class="narr-lbl">‚≠ê Why This Candidate Fits</div><strong>Tyrion Lannister</strong> brings mastery-level expertise in <strong>strategic planning</strong>, <strong>political analysis</strong>, and <strong>alliance building</strong> ‚Äî the three competencies rated most critical for the Chief of Staff position. His two tenures as Hand of the King demonstrate executive-level crisis management across hostile stakeholder environments, directly mirroring the UN's mandate of navigating 193 competing member-state agendas. The 2 identified gaps are in operational areas where adjacent skills suggest a rapid ramp trajectory.</div>
<div class="purpose">I drink, and I know things. The knowing part is the career differentiator.</div>
</section>

<!-- SKILLS NETWORK -->
<section class="sec" id="snet">
<div class="sec-h"><div class="sec-ico"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2"/></svg></div><div><div class="sec-t">Capability Architecture</div><div class="sec-st">Interactive skills network ‚Äî drag to explore, hover for detail, click for evidence</div></div></div>
<div class="net-toggle" id="netToggle">
<button class="net-toggle-btn on" data-mode="match" onclick="setNetMode('match')">Job Match</button>
<button class="net-toggle-btn" data-mode="you" onclick="setNetMode('you')">Candidate Skills</button>
</div>
<div class="net-w" id="snW"><svg id="snS"></svg>
<div class="net-leg" id="snLeg"><div class="net-leg-i"><div class="net-leg-d" style="background:#10b981"></div>Matched</div><div class="net-leg-i"><div class="net-leg-d" style="background:#ef4444"></div>Gap</div><div class="net-leg-i"><div class="net-leg-d" style="background:#475569;opacity:.4"></div>Surplus</div><div class="net-leg-i"><div class="net-leg-d" style="background:#60a5fa"></div>Candidate</div></div></div>
<div class="pop" id="pop"><div class="pop-h"><div class="pop-n" id="popN"></div><button class="pop-x" onclick="document.getElementById('pop').classList.remove('open')">‚úï</button></div><div class="pop-b" id="popB"></div></div>
<div class="viz-hint">Drag nodes to explore ¬∑ Hover for proficiency ¬∑ Click skills for evidence</div>
</section>

<!-- EDUCATION & CERTIFICATIONS -->
<section class="sec" id="creds">
<div class="sec-h"><div class="sec-ico" style="background:rgba(168,85,247,.1);color:#a855f7"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 1.1 2.7 2 6 2s6-.9 6-2v-5"/></svg></div><div><div class="sec-t">Education & Certifications</div><div class="sec-st">Credentials backing verified skills</div></div></div>
<div class="cred-grid">
<div>
<div class="cred-col-h"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 1.1 2.7 2 6 2s6-.9 6-2v-5"/></svg> Education</div>
<div class="cred-item" id="credEdu1">
<div class="cred-name"><span class="cred-name-text">The Citadel</span> <span class="vb edu"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Verified</span></div>
<div class="cred-org cred-org-text">Maester Studies ‚Äî Incomplete (Political circumstances)</div>
<div class="cred-meta"><span>üìç <span class="cred-loc-text">Oldtown, The Reach</span></span><span>üìÖ 283‚Äì285 AC</span></div>
<div class="cred-skills"><span class="cred-skill-tag">Historical Analysis</span><span class="cred-skill-tag">Political Analysis</span><span class="cred-skill-tag">Economic Analysis</span><span class="cred-skill-tag">Pattern Recognition</span></div>
</div>
<div class="cred-item" id="credEdu2">
<div class="cred-name"><span class="cred-name-text">House Lannister Private Tutors</span></div>
<div class="cred-org cred-org-text">Classical Education ‚Äî Languages, History, Strategy, Finance</div>
<div class="cred-meta"><span>üìç <span class="cred-loc-text">Casterly Rock</span></span><span>üìÖ 278‚Äì283 AC</span></div>
<div class="cred-skills"><span class="cred-skill-tag">Rhetoric</span><span class="cred-skill-tag">Financial Management</span><span class="cred-skill-tag">Persuasive Communication</span></div>
</div>
</div>
<div>
<div class="cred-col-h"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 3v18"/></svg> Certifications & Appointments</div>
<div class="cred-item" id="credCert1">
<div class="cred-name"><span class="cred-name-text">Hand of the King</span> <span class="vb cert"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Royal Appointment</span></div>
<div class="cred-org cred-org-text">Crown of the Seven Kingdoms ‚Äî Two tenures under different sovereigns</div>
<div class="cred-meta"><span>üìÖ 299 AC, 305 AC</span><span>üîÑ Active (second tenure)</span></div>
<div class="cred-skills"><span class="cred-skill-tag">Strategic Planning</span><span class="cred-skill-tag">Crisis Management</span><span class="cred-skill-tag">Stakeholder Management</span><span class="cred-skill-tag">Alliance Building</span></div>
</div>
<div class="cred-item" id="credCert2">
<div class="cred-name"><span class="cred-name-text">Master of Coin</span> <span class="vb cert"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Royal Treasurer License</span></div>
<div class="cred-org cred-org-text">Crown Treasury ‚Äî Full fiscal authority over sovereign finances</div>
<div class="cred-meta"><span>üìÖ 299‚Äì300 AC</span><span>‚èπ Completed</span></div>
<div class="cred-skills"><span class="cred-skill-tag">Financial Management</span><span class="cred-skill-tag">Budget Management</span><span class="cred-skill-tag">Economic Analysis</span><span class="cred-skill-tag">High-Stakes Negotiation</span></div>
</div>
<div class="cred-item" id="credCert3">
<div class="cred-name"><span class="cred-name-text">Acting Commander, City Watch</span></div>
<div class="cred-org cred-org-text">Battle of Blackwater Bay ‚Äî Emergency military authority</div>
<div class="cred-meta"><span>üìÖ 299 AC</span><span>‚èπ Wartime commission</span></div>
<div class="cred-skills"><span class="cred-skill-tag">Leadership Under Pressure</span><span class="cred-skill-tag">Crisis Management</span><span class="cred-skill-tag">Risk Assessment</span></div>
</div>
</div>
</div>
</section>

<!-- VALUES NETWORK -->
<section class="sec" id="vnet">
<div class="sec-h"><div class="sec-ico" style="background:rgba(99,102,241,.1);color:var(--p)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div><div><div class="sec-t">Values & Cultural Alignment</div><div class="sec-st">Shared values linked ‚Äî hover for meaning</div></div></div>
<div class="val-sc"><div class="val-sc-n">71%</div><div class="val-sc-l">Values Alignment</div></div>
<div class="net-w" id="vnW"><svg id="vnS"></svg>
<div class="net-leg"><div class="net-leg-i"><div class="net-leg-d" style="background:#10b981"></div>Aligned</div><div class="net-leg-i"><div class="net-leg-d" style="background:#f59e0b"></div>Candidate</div><div class="net-leg-i"><div class="net-leg-d" style="background:#6366f1"></div>Organization</div></div></div>
<div class="narr" style="margin-top:16px"><div class="narr-lbl">Cultural Fit Signal</div>Strong foundational alignment across 5 shared values. Tyrion's unmatched values ("Wit as Armor," "The Mind is the Best Weapon") signal intellectual confidence complementing the UN's deliberative culture. Their emphasis on Diplomatic Neutrality may require adaptation from his more direct style.</div>
<div class="viz-hint">Drag nodes ¬∑ Green bridges show shared values</div>
</section>

<!-- SKILL LIST -->
<section class="sec" id="skills"><div class="sec-h"><div class="sec-ico"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></div><div><div class="sec-t">Skill Alignment Detail</div><div class="sec-st">Click any row for evidence</div></div></div><div class="sk-list" id="skL"></div></section>

<!-- GAPS -->
<section class="sec" id="gaps"><div class="sec-h"><div class="sec-ico" style="background:rgba(239,68,68,.1);color:var(--r)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></div><div><div class="sec-t">Gap Analysis & Bridge Potential</div><div class="sec-st">Missing skills with adjacent competencies</div></div></div><div id="gapL"></div></section>

<!-- OUTCOMES -->
<section class="sec" id="outcomes"><div class="sec-h"><div class="sec-ico" style="background:rgba(245,158,11,.1);color:var(--am)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></div><div><div class="sec-t">Outcomes & Achievements</div><div class="sec-st">Verified results from prior roles</div></div></div>
<div class="outc"><div class="outc-t">Defended King's Landing during Blackwater Bay, coordinating a <span class="outc-m">multi-front defensive strategy</span> neutralizing a naval force 5x the garrison. <span class="vb"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Verified</span></div></div>
<div class="outc"><div class="outc-t">Negotiated alliance between <span class="outc-m">historically hostile factions</span> under existential threat, achieving consensus where a decade of diplomacy failed. <span class="vb"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Verified</span></div></div>
<div class="outc"><div class="outc-t">Managed the <span class="outc-m">Crown Treasury</span> as Master of Coin, restructuring debt with the Iron Bank and reducing fiscal exposure ~40%. <span class="vb cert"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Royal Treasurer License</span></div></div>
<div class="outc"><div class="outc-t">Advised two sovereigns through <span class="outc-m">regime transitions</span> ‚Äî institutional continuity across fundamentally different governance philosophies.</div></div>
</section>

<!-- DOMAINS -->
<section class="sec" id="domains"><div class="sec-h"><div class="sec-ico"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></div><div><div class="sec-t">Competency Domains</div><div class="sec-st">Distribution across professional clusters</div></div></div>
<div class="pgrid"><div class="pcard"><div class="pcard-n" style="color:#f59e0b">3</div><div class="pcard-l">Mastery</div></div><div class="pcard"><div class="pcard-n" style="color:#a855f7">7</div><div class="pcard-l">Expert</div></div><div class="pcard"><div class="pcard-n" style="color:#3b82f6">9</div><div class="pcard-l">Advanced</div></div><div class="pcard"><div class="pcard-n" style="color:#10b981">5</div><div class="pcard-l">Proficient</div></div><div class="pcard"><div class="pcard-n" style="color:#6b7280">2</div><div class="pcard-l">Novice</div></div></div>
<div id="domL"></div></section>

<!-- COMP TEASER -->
<section class="sec" id="comp"><div class="sec-h"><div class="sec-ico" style="background:rgba(16,185,129,.1);color:var(--g)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg></div><div><div class="sec-t">Compensation Intelligence</div><div class="sec-st">Market positioning & benchmarks</div></div></div>
<div class="teaser"><div style="font-size:2em;margin-bottom:12px;opacity:.4">üìä</div><div style="font-weight:700;margin-bottom:6px;color:var(--t2)">Compensation Data Available</div><div style="font-size:.82em;color:var(--tm);max-width:400px;margin:0 auto;line-height:1.6">Market rate analysis, BLS benchmarks, and positioning data have been prepared. This data becomes available as the conversation progresses.</div><div style="margin-top:16px;font-size:.72em;color:var(--tm)">üîí Candidate-controlled release</div></div></section>

</div>

<!-- BLIND MODE FAB -->
<button class="blind-fab" id="blindFab" onclick="toggleBlindPanel()" title="Blind Mode ‚Äî Anonymize candidate identity">
<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
</button>

<div class="blind-panel" id="blindPanel">
<div class="blind-panel-h">üôà Blind Mode</div>
<div class="blind-panel-sub">Control what identifying information is visible to the reviewer. Candidate sets defaults; reviewer can request a blind version.</div>

<div class="blind-row"><div class="blind-row-label">Identity (name, photo)</div><div class="blind-toggle" id="blindIdentity" onclick="this.classList.toggle('on')"></div></div>
<div class="blind-row"><div class="blind-row-label">Location</div><div class="blind-toggle" id="blindLocation" onclick="this.classList.toggle('on')"></div></div>
<div class="blind-row"><div class="blind-row-label">Employer names</div><div class="blind-toggle" id="blindEmployer" onclick="this.classList.toggle('on')"></div></div>
<div class="blind-row"><div class="blind-row-label">Institution names</div><div class="blind-toggle" id="blindInstitution" onclick="this.classList.toggle('on')"></div></div>
<div class="blind-row"><div class="blind-row-label">Outcome details</div><div class="blind-toggle" id="blindOutcomes" onclick="this.classList.toggle('on')"></div></div>

<div class="blind-actions">
<button class="blind-reset" onclick="resetBlind()">Reset</button>
<button class="blind-apply" onclick="applyBlind()">Apply Blind Mode</button>
</div>
</div>

<!-- COMM BAR -->
<div class="cbar">
<div style="display:flex;gap:6px"><button class="rbtn" onclick="rx(this)">üëç Strong Fit</button><button class="rbtn" onclick="rx(this)">ü§î Interesting</button><button class="rbtn" onclick="rx(this)">‚ÜîÔ∏è Not Aligned</button></div>
<button class="nbtn" onclick="document.getElementById('nm').classList.add('open')">‚úâÔ∏è Send a Note</button>
<button class="sbtn" onclick="navigator.clipboard?.writeText(location.href);this.textContent='‚úì Copied';setTimeout(()=>this.innerHTML='‚Üó Share',2e3)">‚Üó Share</button>
</div>
<div class="nmod" id="nm"><div class="nbox"><h3>Send a Note to Tyrion</h3><textarea class="nta" placeholder="I'd like to discuss this role further..."></textarea><div class="nacts"><button style="padding:8px 18px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--tm);font-family:'Outfit';cursor:pointer" onclick="document.getElementById('nm').classList.remove('open')">Cancel</button><button style="padding:8px 22px;border-radius:8px;border:none;background:var(--a);color:#fff;font-family:'Outfit';font-weight:600;cursor:pointer" onclick="document.getElementById('nm').classList.remove('open')">Send</button></div></div></div>

<script>
const CN='Tyrion Lannister', JT='Chief of Staff to the Secretary-General';
const roles=[{id:'dipl',name:'Diplomacy & Statecraft',color:'#60a5fa'},{id:'strat',name:'Strategic Leadership',color:'#a855f7'},{id:'fin',name:'Financial & Economic',color:'#10b981'},{id:'intel',name:'Intelligence & Analysis',color:'#f59e0b'},{id:'comm',name:'Communication & Rhetoric',color:'#ec4899'}];
const US=[
{n:'Strategic Planning',l:'Mastery',r:['strat'],k:1,ev:'Designed defense of King\'s Landing during Blackwater. Coordinated multi-faction alliance strategy as Hand.',vf:'verified'},
{n:'Political Analysis',l:'Mastery',r:['intel'],k:1,ev:'Predicted fall of three major regimes before conventional intelligence identified instability.',vf:'verified'},
{n:'Alliance Building',l:'Mastery',r:['dipl'],k:1,ev:'Brokered unprecedented Stark-Targaryen alliance. Negotiated cessation between Lannister and Tyrell.',vf:'verified'},
{n:'Stakeholder Management',l:'Expert',r:['dipl','strat'],ev:'Managed competing interests of Small Council, noble houses, military commanders simultaneously.'},
{n:'Crisis Management',l:'Expert',r:['strat'],ev:'Led city defense during siege with no formal military rank. Managed food crisis and sabotage concurrently.',vf:'verified'},
{n:'High-Stakes Negotiation',l:'Expert',r:['dipl'],ev:'Negotiated with Iron Bank to restructure Crown debt. Brokered hostage exchanges between factions.'},
{n:'Persuasive Communication',l:'Expert',r:['comm'],ev:'Delivered pivotal addresses to hostile audiences ‚Äî trial defense and siege morale speeches.'},
{n:'Financial Management',l:'Expert',r:['fin'],ev:'Master of Coin managing Crown Treasury. Restructured sovereign debt obligations.',vf:'cert',vfLabel:'Royal Treasurer License'},
{n:'Intelligence Gathering',l:'Advanced',r:['intel'],ev:'Maintained independent network through Varys partnership.'},
{n:'Pattern Recognition',l:'Expert',r:['intel'],ev:'Identified Cersei\'s wildfire plot. Recognized strategic implications of Daenerys\'s eastern campaign.'},
{n:'Conflict Resolution',l:'Advanced',r:['dipl'],ev:'Mediated disputes between Daenerys and northern allies. Resolved Small Council power struggles.'},
{n:'Cross-Cultural Communication',l:'Advanced',r:['comm','dipl'],ev:'Operated across Westerosi, Essosi, Dothraki, and Free Cities cultures.'},
{n:'Risk Assessment',l:'Advanced',r:['intel','strat'],ev:'Conducted strategic risk analysis informing key military and political decisions.'},
{n:'Leadership Under Pressure',l:'Expert',r:['strat'],ev:'Assumed battlefield command during Blackwater when senior leadership was incapacitated.'},
{n:'Historical Analysis',l:'Advanced',r:['intel'],ev:'Studied histories of kingdoms, wars, and political systems. Applied precedent to strategy.',vf:'edu',vfLabel:'Maester Studies'},
{n:'Resilience',l:'Expert',r:['strat'],ev:'Survived assassination, imprisonment, exile, enslavement ‚Äî rebuilt influence each time.'},
{n:'Adaptive Leadership',l:'Advanced',r:['strat'],ev:'Transitioned between radically different contexts ‚Äî Lannister court to Targaryen governance.'},
{n:'Talent Assessment',l:'Advanced',r:['strat'],ev:'Elevated key personnel (Bronn, Podrick) based on capability not credentials.'},
{n:'Rhetoric',l:'Expert',r:['comm'],ev:'Master of persuasive speech. Trial defense considered most powerful oration in recent history.'},
{n:'Economic Analysis',l:'Advanced',r:['fin'],ev:'Analyzed trade economics, resource scarcity impacts on campaigns.'},
{n:'Emotional Intelligence',l:'Advanced',r:['dipl','comm'],ev:'Read emotional states of adversaries and allies for negotiation advantage.'},
{n:'Organizational Design',l:'Proficient',r:['strat'],ev:'Restructured Small Council under two different sovereigns.'},
{n:'Budget Management',l:'Proficient',r:['fin'],ev:'Oversaw Crown expenditures and debt servicing as Master of Coin.'},
{n:'Public Speaking',l:'Advanced',r:['comm'],ev:'Speeches to courts, armies, and hostile tribunals with equal effectiveness.'},
{n:'Diplomatic Protocol',l:'Proficient',r:['dipl'],ev:'Navigated formal court protocols across multiple kingdoms.'},
{n:'Wine Evaluation',l:'Mastery',r:['strat'],ev:'Unmatched palate. Career differentiator.'}
];
const JM=new Set(['strategic planning','political analysis','alliance building','stakeholder management','crisis management','high-stakes negotiation']);
const MS=new Set();US.forEach(s=>{if(JM.has(s.n.toLowerCase()))MS.add(s.n)});
const GN=['Public Administration at Scale','Multilateral Treaty Law'];
const uVals=[{n:'Intellectual Honesty',s:'aligned'},{n:'Resilience',s:'aligned'},{n:'Strategic Thinking',s:'aligned'},{n:'Courage',s:'aligned'},{n:'Accountability',s:'aligned'},{n:'Wit as Armor',s:'yours'},{n:'The Mind is the Best Weapon',s:'yours'}];
const cVals=[{n:'Intellectual Honesty',t:'primary',s:'aligned'},{n:'Resilience',t:'primary',s:'aligned'},{n:'Strategic Thinking',t:'primary',s:'aligned'},{n:'Courage',t:'secondary',s:'aligned'},{n:'Accountability',t:'secondary',s:'aligned'},{n:'Diplomatic Neutrality',t:'primary',s:'theirs'},{n:'Multilateral Consensus',t:'secondary',s:'theirs'}];
const gapData=[{n:'Public Administration at Scale',rq:'Required',br:'Governance of King\'s Landing (~500K) demonstrates foundational public admin. Scale gap significant but bridgeable.',adj:['Stakeholder Management','Organizational Design','Adaptive Leadership']},{n:'Multilateral Treaty Law',rq:'Required',br:'Extensive negotiation across competing jurisdictions mirrors practical treaty challenges. Historical analysis accelerates comprehension.',adj:['High-Stakes Negotiation','Historical Analysis','Cross-Cultural Communication']}];
const doms=[{n:'Diplomacy & Statecraft',c:8,m:26,cl:'#60a5fa'},{n:'Strategic Leadership',c:6,m:26,cl:'#a855f7'},{n:'Financial & Economic',c:4,m:26,cl:'#10b981'},{n:'Intelligence & Analysis',c:4,m:26,cl:'#f59e0b'},{n:'Communication & Rhetoric',c:4,m:26,cl:'#ec4899'}];

// Tooltip
const tip=d3.select('#tip');
function showT(e,h){tip.html(h).style('opacity',1);const tw=tip.node().offsetWidth||200,th=tip.node().offsetHeight||60,vw=window.innerWidth;let l=e.pageX+14,t=e.pageY-14;if(l+tw>vw-10)l=e.pageX-tw-14;if(t<10)t=e.pageY+18;tip.style('left',l+'px').style('top',t+'px')}
function hideT(){tip.style('opacity',0)}

// Drag
let sSim,vSim;
function mkD(sim){return d3.drag().on('start',(e,d)=>{if(!e.active)sim.alphaTarget(.3).restart();d.fx=d.x;d.fy=d.y}).on('drag',(e,d)=>{d.fx=e.x;d.fy=e.y}).on('end',(e,d)=>{if(!e.active)sim.alphaTarget(0);if(d.type==='center'||d.type==='hub')return;d.fx=null;d.fy=null})}

// ===== NETWORK MODE TOGGLE =====
let curNetMode = 'match';
function setNetMode(mode) {
    curNetMode = mode;
    document.querySelectorAll('.net-toggle-btn').forEach(b => b.classList.toggle('on', b.dataset.mode === mode));
    document.getElementById('pop').classList.remove('open');
    const leg = document.getElementById('snLeg');
    if (mode === 'match') {
        initSN();
        if (leg) leg.innerHTML = '<div class="net-leg-i"><div class="net-leg-d" style="background:#10b981"></div>Matched</div><div class="net-leg-i"><div class="net-leg-d" style="background:#ef4444"></div>Gap</div><div class="net-leg-i"><div class="net-leg-d" style="background:#475569;opacity:.4"></div>Surplus</div><div class="net-leg-i"><div class="net-leg-d" style="background:#60a5fa"></div>Candidate</div>';
    } else {
        initYouNet();
        if (leg) leg.innerHTML = '<div class="net-leg-i"><div class="net-leg-d" style="background:#60a5fa"></div>Candidate</div><div class="net-leg-i"><div class="net-leg-d" style="background:rgba(148,163,184,.4)"></div>Role Cluster</div>';
    }
}

// ===== CANDIDATE-ONLY NETWORK (no job overlay) =====
function isLight() { return document.documentElement.classList.contains('light'); }
function initYouNet() {
    const w = document.getElementById('snW'), W = w.clientWidth, H = Math.max(450, Math.min(600, innerHeight * .55)), mob = W <= 768, sf = Math.max(.8, Math.min(W / 900, 1.4));
    const svg = d3.select('#snS').attr('width', W).attr('height', H); svg.selectAll('*').remove();
    if (sSim) sSim.stop();
    const cY = H * .25;
    const N = [{ id: 'center', name: CN, type: 'center', ms: 'center', x: W / 2, y: cY, fx: W / 2, fy: cY }];
    const L = [];
    let ix = 0;
    // Role clusters
    roles.forEach((r, i) => {
        const a = (i / roles.length) * 2 * Math.PI, rd = (mob ? 110 : 180) * sf;
        N.push({ id: r.id, name: r.name, type: 'role', color: r.color, ms: 'role', x: W / 2 + Math.cos(a) * rd, y: cY + Math.sin(a) * rd });
        L.push({ source: 'center', target: r.id, type: 'role' });
    });
    // All user skills ‚Äî no job node, no gap nodes
    const showSkills = mob ? US.filter(s => s.k || s.l === 'Mastery' || s.l === 'Expert').slice(0, 30) : US;
    showSkills.forEach(s => {
        const id = 'u-' + ix++;
        N.push({ id, name: s.n, type: 'skill', level: s.l, ms: 'own', ev: s.ev, src: 'user', roles: s.r, vf: s.vf, vfLabel: s.vfLabel });
        (s.r || []).forEach(rid => L.push({ source: rid, target: id, type: 'skill' }));
    });
    const gv = H * .48;
    const levelColor = { Mastery: '#f59e0b', Expert: '#a855f7', Advanced: '#3b82f6', Proficient: '#10b981', Novice: '#6b7280' };
    sSim = d3.forceSimulation(N)
        .force('link', d3.forceLink(L).id(d => d.id).distance(d => d.type === 'role' ? (mob ? 90 : 150) * sf : (mob ? 75 : 125) * sf))
        .force('charge', d3.forceManyBody().strength(d => d.type === 'center' ? 0 : d.type === 'role' ? (mob ? -180 : -260) * sf : (mob ? -100 : -150) * sf))
        .force('center', d3.forceCenter(W / 2, gv))
        .force('collision', d3.forceCollide().radius(d => d.type === 'center' ? (mob ? 36 : 50) * sf : d.type === 'role' ? (mob ? 30 : 44) * sf : (mob ? 20 : 28) * sf))
        .force('x', d3.forceX(W / 2).strength(.06))
        .force('y', d3.forceY(gv).strength(.06));
    const lk = svg.append('g').selectAll('line').data(L).join('line').attr('class', 'link').style('stroke', isLight() ? 'rgba(100,116,139,0.3)' : 'rgba(148,163,184,0.35)').style('stroke-opacity', 1).style('stroke-width', 1.8);
    const nd = svg.append('g').selectAll('g').data(N).join('g').attr('class', d => 'node ' + d.type).call(mkD(sSim));
    nd.append('circle')
        .attr('r', d => { if (d.type === 'center') return mob ? 26 : Math.round(36 * sf); if (d.type === 'role') return mob ? 20 : Math.round(26 * sf); const lr = { Mastery: 14, Expert: 11, Advanced: 9, Proficient: 7, Novice: 6 }; return mob ? (lr[d.level] || 8) : Math.round((lr[d.level] || 8) * sf); })
        .attr('fill', d => { if (d.type === 'center') return isLight() ? '#2563eb' : '#60a5fa'; if (d.type === 'role') return isLight() ? 'rgba(100,116,139,.15)' : 'rgba(148,163,184,.2)'; return levelColor[d.level] || '#6b7280'; })
        .attr('stroke', d => { if (d.type === 'role') return isLight() ? '#94a3b8' : '#64748b'; if (d.vf) return '#10b981'; return isLight() ? 'rgba(0,0,0,.1)' : 'rgba(255,255,255,.15)'; })
        .attr('stroke-width', d => d.vf ? 2.5 : (d.type === 'role' ? 2 : 1))
        .style('cursor', d => d.type === 'skill' ? 'pointer' : 'grab')
        .on('click', (e, d) => { if (d.type === 'skill' && d.src === 'user') openPop(d); })
        .on('mouseover', (e, d) => {
            let h = '<div class="tt-t">' + d.name + '</div>';
            if (d.level) h += '<div class="tt-s">' + d.level + '</div>';
            if (d.vf) h += '<div class="tt-s" style="color:#10b981;margin-top:2px">‚úì ' + (d.vfLabel || 'Verified') + '</div>';
            if (d.type === 'skill') h += '<div class="tt-s" style="margin-top:4px;border-top:1px solid rgba(255,255,255,.08);padding-top:4px">Click for evidence</div>';
            showT(e, h);
        }).on('mouseout', hideT);
    nd.append('text').text(d => d.name).attr('x', 0).attr('y', d => d.type === 'center' ? -(mob ? 32 : 42) : d.type === 'role' ? -(mob ? 26 : 34) : -(mob ? 14 : 18)).attr('text-anchor', 'middle').style('font-size', d => d.type === 'center' ? (mob ? '11px' : '14px') : d.type === 'role' ? (mob ? '9px' : '11px') : (mob ? '7px' : '9px')).style('fill', d => { if (d.type === 'role') return isLight() ? '#475569' : '#94a3b8'; return levelColor[d.level] || (isLight() ? '#334155' : '#cbd5e1'); }).style('font-weight', d => (d.type === 'center' || d.type === 'role') ? '700' : '400');
    if (mob) nd.selectAll('text').filter(d => d.type === 'skill' && d.level !== 'Mastery' && d.level !== 'Expert').classed('hidden', true);
    nd.filter(d => d.type === 'role').raise(); nd.filter(d => d.type === 'center').raise();
    sSim.on('tick', () => { const p = mob ? 40 : 65; N.forEach(d => { if (d.type !== 'center') { d.x = Math.max(p, Math.min(W - p, d.x)); d.y = Math.max(p, Math.min(H - p, d.y)); } }); lk.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y); nd.attr('transform', d => `translate(${d.x},${d.y})`); });
}

// ===== SKILLS MATCH NETWORK =====
function initSN(){
const w=document.getElementById('snW'),W=w.clientWidth,H=Math.max(450,Math.min(600,innerHeight*.55)),mob=W<=768,sf=Math.max(.8,Math.min(W/900,1.4));
const svg=d3.select('#snS').attr('width',W).attr('height',H);svg.selectAll('*').remove();
const cY=H*.25,N=[{id:'center',name:CN,type:'center',ms:'center',x:W/2,y:cY,fx:W/2,fy:cY}],L=[];let ix=0;
roles.forEach((r,i)=>{const a=(i/roles.length)*2*Math.PI,rd=(mob?100:170)*sf;N.push({id:r.id,name:r.name,type:'role',color:r.color,ms:'role',x:W/2+Math.cos(a)*rd,y:cY+Math.sin(a)*rd});L.push({source:'center',target:r.id,type:'role'})});
N.push({id:'rj',name:JT+' Needs',type:'role',color:'#ef4444',ms:'role',x:W/2,y:H*.75});L.push({source:'center',target:'rj',type:'role'});
US.forEach(s=>{const im=MS.has(s.n),st=im?'matched':'surplus',id='u-'+ix++;N.push({id,name:s.n,type:'skill',level:s.l,ms:st,ev:s.ev,src:'user',roles:s.r,vf:s.vf,vfLabel:s.vfLabel});(s.r||[]).forEach(rid=>L.push({source:rid,target:id,type:'skill'}));if(im)L.push({source:'rj',target:id,type:'match'})});
GN.forEach(g=>{const id='g-'+ix++;N.push({id,name:g,type:'skill',level:'Required',ms:'gap',src:'job'});L.push({source:'rj',target:id,type:'skill'})});
const mc={matched:'#10b981',gap:'#ef4444',surplus:'#475569'},gv=H*.45,lt=isLight();
sSim=d3.forceSimulation(N).force('link',d3.forceLink(L).id(d=>d.id).distance(d=>d.type==='role'?(mob?85:140)*sf:d.type==='match'?(mob?55:95)*sf:(mob?70:120)*sf)).force('charge',d3.forceManyBody().strength(d=>d.type==='center'?0:d.type==='role'?(mob?-160:-240)*sf:d.ms==='gap'?(mob?-70:-110)*sf:(mob?-90:-140)*sf)).force('center',d3.forceCenter(W/2,gv)).force('collision',d3.forceCollide().radius(d=>d.type==='center'?(mob?36:50)*sf:d.type==='role'?(mob?30:44)*sf:(mob?18:26)*sf)).force('x',d3.forceX(W/2).strength(.06)).force('y',d3.forceY(gv).strength(.06));
const lk=svg.append('g').selectAll('line').data(L).join('line').attr('class','link').style('stroke',d=>d.type==='match'?mc.matched:(lt?'rgba(100,116,139,0.3)':'rgba(148,163,184,0.25)')).style('stroke-opacity',d=>d.type==='match'?.6:1).style('stroke-width',d=>d.type==='match'?2.5:1.5).style('stroke-dasharray',d=>d.type==='match'?'4,3':'none');
const nd=svg.append('g').selectAll('g').data(N).join('g').attr('class',d=>'node '+d.type).call(mkD(sSim));
nd.append('circle').attr('r',d=>{if(d.type==='center')return mob?26:Math.round(36*sf);if(d.type==='role')return mob?20:Math.round(26*sf);if(d.ms==='matched')return mob?11:Math.round(13*sf);if(d.ms==='gap')return mob?9:Math.round(11*sf);return mob?6:Math.round(7*sf)}).attr('fill',d=>{if(d.type==='center')return lt?'#2563eb':'#60a5fa';if(d.type==='role')return d.id==='rj'?'rgba(239,68,68,.25)':(lt?'rgba(100,116,139,.12)':'rgba(148,163,184,.2)');return mc[d.ms]||'#6b7280'}).attr('opacity',d=>d.ms==='surplus'?.3:1).attr('stroke',d=>{if(d.type==='role')return d.id==='rj'?'#ef4444':(lt?'#94a3b8':'#64748b');if(d.vf)return'#10b981';if(d.ms==='matched')return lt?'#e2e8f0':'#fff';if(d.ms==='gap')return'#fca5a5';return'none'}).attr('stroke-width',d=>d.vf?2.5:(d.type==='role'||d.ms==='matched'||d.ms==='gap')?2:0).style('cursor',d=>d.type==='skill'&&d.src==='user'?'pointer':'grab')
.on('click',(e,d)=>{if(d.type==='skill'&&d.src==='user')openPop(d)})
.on('mouseover',(e,d)=>{let h='<div class="tt-t">'+d.name+'</div>';if(d.level)h+='<div class="tt-s">'+d.level+(d.ms==='matched'?' ¬∑ ‚úì Matched':d.ms==='gap'?' ¬∑ ‚úó Gap':'')+'</div>';if(d.vf)h+='<div class="tt-s" style="color:#10b981;margin-top:2px">‚úì '+(d.vfLabel||'Verified')+'</div>';if(d.type==='skill'&&d.src==='user')h+='<div class="tt-s" style="margin-top:4px;border-top:1px solid rgba(255,255,255,.08);padding-top:4px">Click for evidence</div>';showT(e,h)}).on('mouseout',hideT);
nd.append('text').text(d=>d.name).attr('x',0).attr('y',d=>d.type==='center'?-(mob?32:42):d.type==='role'?-(mob?26:34):-(mob?14:18)).attr('text-anchor','middle').style('font-size',d=>d.type==='center'?(mob?'11px':'14px'):d.type==='role'?(mob?'9px':'11px'):(mob?'7px':'9px')).style('fill',d=>{if(d.ms==='matched')return mc.matched;if(d.ms==='gap')return mc.gap;if(d.ms==='surplus')return lt?'#94a3b8':'#64748b';if(d.type==='role'&&d.id==='rj')return'#ef4444';if(d.type==='role')return lt?'#475569':'#94a3b8';return lt?'#334155':'#cbd5e1'}).style('opacity',d=>d.ms==='surplus'?.35:1).style('font-weight',d=>(d.type==='center'||d.type==='role')?'700':'400');
if(mob)nd.selectAll('text').filter(d=>d.type==='skill'&&d.ms==='surplus').classed('hidden',true);
nd.filter(d=>d.type==='role').raise();nd.filter(d=>d.type==='center').raise();
sSim.on('tick',()=>{const p=mob?40:65;N.forEach(d=>{if(d.type!=='center'){d.x=Math.max(p,Math.min(W-p,d.x));d.y=Math.max(p,Math.min(H-p,d.y))}});lk.attr('x1',d=>d.source.x).attr('y1',d=>d.source.y).attr('x2',d=>d.target.x).attr('y2',d=>d.target.y);nd.attr('transform',d=>`translate(${d.x},${d.y})`)})
}

// ===== VALUES NETWORK =====
function initVN(){
const w=document.getElementById('vnW'),W=w.clientWidth,H=Math.max(380,Math.min(500,innerHeight*.48)),mob=W<=768,sf=Math.max(.8,Math.min(W/900,1.4));
const svg=d3.select('#vnS').attr('width',W).attr('height',H);svg.selectAll('*').remove();
const cY=H*.48,lX=mob?W*.22:W*.28,rX=mob?W*.78:W*.72,tY=mob?H*.15:H*.15;
const N=[],L=[],aSet=new Set(uVals.filter(v=>v.s==='aligned').map(v=>v.n)),vc={aligned:'#10b981',yours:'#f59e0b',theirs:'#6366f1'};
N.push({id:'hu',name:"Tyrion's Values",type:'hub',side:'user',x:lX,y:tY,fx:lX,fy:tY});
N.push({id:'hc',name:"UN's Culture",type:'hub',side:'company',x:rX,y:tY,fx:rX,fy:tY});
uVals.forEach((v,i)=>{const a=(i/uVals.length)*Math.PI*.8+Math.PI*.6,rd=(mob?120:170)*sf;N.push({id:'uv-'+i,name:v.n,type:'value',side:'user',vs:v.s,x:lX+Math.cos(a)*rd,y:cY+Math.sin(a)*rd*.7});L.push({source:'hu',target:'uv-'+i,type:'spoke'})});
cVals.forEach((v,i)=>{const a=(i/cVals.length)*Math.PI*.8+Math.PI*1.6,rd=(mob?120:170)*sf;N.push({id:'cv-'+i,name:v.n,type:'value',side:'company',vs:v.s,tier:v.t,x:rX+Math.cos(a)*rd,y:cY+Math.sin(a)*rd*.7});L.push({source:'hc',target:'cv-'+i,type:'spoke'})});
uVals.forEach((v,ui)=>{if(aSet.has(v.n)){const ci=cVals.findIndex(c=>c.n===v.n);if(ci!==-1)L.push({source:'uv-'+ui,target:'cv-'+ci,type:'bridge'})}});
const vlt=isLight();
vSim=d3.forceSimulation(N).force('link',d3.forceLink(L).id(d=>d.id).distance(d=>d.type==='bridge'?(mob?170:250)*sf:(mob?95:145)*sf).strength(d=>d.type==='bridge'?.1:.5)).force('charge',d3.forceManyBody().strength(d=>d.type==='hub'?0:(mob?-180:-280)*sf)).force('collision',d3.forceCollide().radius(d=>d.type==='hub'?(mob?42:56)*sf:(mob?34:44)*sf)).force('x',d3.forceX(d=>d.side==='user'?lX:d.side==='company'?rX:W/2).strength(.08)).force('y',d3.forceY(cY).strength(.04));
const lk=svg.append('g').selectAll('line').data(L).join('line').attr('class','link').style('stroke',d=>d.type==='bridge'?vc.aligned:(vlt?'rgba(100,116,139,.2)':'rgba(148,163,184,.15)')).style('stroke-opacity',d=>d.type==='bridge'?.65:1).style('stroke-width',d=>d.type==='bridge'?2.5:1.5).style('stroke-dasharray',d=>d.type==='bridge'?'6,4':'none');
const nd=svg.append('g').selectAll('g').data(N).join('g').attr('class',d=>'node '+d.type).call(mkD(vSim));
nd.append('circle').attr('r',d=>{if(d.type==='hub')return mob?24:Math.round(32*sf);if(d.vs==='aligned')return mob?14:Math.round(18*sf);return mob?10:Math.round(13*sf)}).attr('fill',d=>{if(d.type==='hub')return d.side==='user'?(vlt?'#2563eb':'#60a5fa'):'#f59e0b';return vc[d.vs]||'#6b7280'}).attr('stroke',d=>{if(d.type==='hub')return vlt?'rgba(0,0,0,.1)':'rgba(255,255,255,.3)';if(d.vs==='aligned')return vlt?'#e2e8f0':'#fff';return'none'}).attr('stroke-width',d=>(d.type==='hub'||d.vs==='aligned')?2:0).attr('opacity',d=>d.vs==='theirs'?.6:1)
.on('mouseover',(e,d)=>{const lb={aligned:'‚úÖ Shared value',yours:'üü° Candidate priority',theirs:'üü£ Organization priority'};let h='<div class="tt-t">'+d.name+'</div>';if(d.vs)h+='<div class="tt-s" style="color:'+(vc[d.vs]||'#9ca3af')+'">'+lb[d.vs]+'</div>';if(d.tier)h+='<div class="tt-s">'+(d.tier==='primary'?'Core value':'Secondary value')+'</div>';showT(e,h)}).on('mouseout',hideT);
nd.append('text').text(d=>d.name).attr('x',0).attr('y',d=>d.type==='hub'?-(mob?30:Math.round(40*sf)):-(mob?18:Math.round(24*sf))).attr('text-anchor','middle').style('font-size',d=>d.type==='hub'?(mob?'11px':'13px'):(mob?'8px':'10px')).style('fill',d=>{if(d.type==='hub')return d.side==='user'?(vlt?'#1d4ed8':'#93c5fd'):(vlt?'#b45309':'#fbbf24');return vc[d.vs]||(vlt?'#475569':'#94a3b8')}).style('font-weight',d=>d.type==='hub'?'700':d.vs==='aligned'?'600':'400');
nd.filter(d=>d.type==='hub').raise();
if(mob)nd.selectAll('text').filter(d=>d.type==='value'&&d.vs!=='aligned').classed('hidden',true);
vSim.on('tick',()=>{const p=mob?36:60;N.forEach(d=>{if(d.type!=='hub'){d.x=Math.max(p,Math.min(W-p,d.x));d.y=Math.max(p,Math.min(H-p,d.y))}});lk.attr('x1',d=>d.source.x).attr('y1',d=>d.source.y).attr('x2',d=>d.target.x).attr('y2',d=>d.target.y);nd.attr('transform',d=>`translate(${d.x},${d.y})`)})
}

// ===== THEME TOGGLE =====
function toggleTheme() {
    const html = document.documentElement;
    const isLight = html.classList.toggle('light');
    const icon = document.getElementById('themeIcon');
    // Sun icon for light mode, moon for dark
    icon.innerHTML = isLight
        ? '<circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>'
        : '<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>';
    // Re-render networks with new text colors
    if (curNetMode === 'match') initSN(); else initYouNet();
    initVN();
}

// ===== BLIND MODE =====
let blindActive = false;
const blindState = { identity:false, location:false, employer:false, institution:false, outcomes:false };
const originals = { name:'Tyrion Lannister', photo:'üç∑', heroTitle:'Hand of the King & Strategic Advisor', location:'King\'s Landing, Westeros', outcomes:[] };
const blindOutcomes = [
    'Coordinated a <span class="outc-m">multi-front defensive strategy</span> for a major metropolitan center, neutralizing a force 5x the garrison. <span class="vb"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Verified</span>',
    'Brokered alliance between <span class="outc-m">historically hostile factions</span> under existential threat, achieving consensus where a decade of diplomacy failed. <span class="vb"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Verified</span>',
    'Managed a <span class="outc-m">sovereign treasury</span>, restructuring debt with international creditors and reducing fiscal exposure ~40%. <span class="vb cert"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>Licensed Credential</span>',
    'Advised two heads of state through <span class="outc-m">regime transitions</span> ‚Äî institutional continuity across fundamentally different governance philosophies.'
];

function toggleBlindPanel() { document.getElementById('blindPanel').classList.toggle('open'); }

function resetBlind() {
    blindActive = false;
    ['blindIdentity','blindLocation','blindEmployer','blindInstitution','blindOutcomes'].forEach(id => document.getElementById(id).classList.remove('on'));
    Object.keys(blindState).forEach(k => blindState[k] = false);
    applyBlind();
    document.getElementById('blindFab').classList.remove('active');
}

function applyBlind() {
    blindState.identity = document.getElementById('blindIdentity').classList.contains('on');
    blindState.location = document.getElementById('blindLocation').classList.contains('on');
    blindState.employer = document.getElementById('blindEmployer').classList.contains('on');
    blindState.institution = document.getElementById('blindInstitution').classList.contains('on');
    blindState.outcomes = document.getElementById('blindOutcomes').classList.contains('on');
    blindActive = Object.values(blindState).some(v => v);
    document.getElementById('blindFab').classList.toggle('active', blindActive);

    // Identity
    const h1 = document.querySelector('.hero h1');
    const photo = document.querySelector('.photo');
    if (blindState.identity) {
        if (h1) { h1.textContent = 'Anonymous Candidate'; h1.classList.add('blinded-name'); }
        if (photo) { photo.textContent = '?'; photo.classList.add('blinded-photo'); }
        document.querySelectorAll('.narr strong').forEach((el,i) => { if (i === 0) el.textContent = 'This candidate'; });
        // Blind the note modal title
        const noteH3 = document.querySelector('.nbox h3');
        if (noteH3) noteH3.textContent = 'Send a Note to Candidate';
    } else {
        if (h1) { h1.textContent = originals.name; h1.classList.remove('blinded-name'); }
        if (photo) { photo.textContent = originals.photo; photo.classList.remove('blinded-photo'); }
        document.querySelectorAll('.narr strong').forEach((el,i) => { if (i === 0) el.textContent = originals.name; });
        const noteH3 = document.querySelector('.nbox h3');
        if (noteH3) noteH3.textContent = 'Send a Note to Tyrion';
    }

    // Location
    document.querySelectorAll('.hero-meta span').forEach(s => {
        if (s.textContent.includes('üìç')) s.style.display = blindState.location ? 'none' : '';
    });
    document.querySelectorAll('.cred-loc-text').forEach(el => {
        el.style.filter = blindState.location ? 'blur(6px)' : '';
        el.style.userSelect = blindState.location ? 'none' : '';
    });

    // Employer names
    document.querySelectorAll('.cred-org-text').forEach(el => {
        el.style.filter = blindState.employer ? 'blur(6px)' : '';
        el.style.userSelect = blindState.employer ? 'none' : '';
    });
    const heroSub = document.querySelector('.hero-sub');
    if (heroSub) heroSub.textContent = blindState.employer ? 'Senior Strategic Advisor' : originals.heroTitle;

    // Institution names
    document.querySelectorAll('.cred-name-text').forEach(el => {
        el.style.filter = blindState.institution ? 'blur(6px)' : '';
        el.style.userSelect = blindState.institution ? 'none' : '';
    });

    // Outcomes ‚Äî swap to abstracted text
    const outcDivs = document.querySelectorAll('.outc .outc-t');
    if (!originals.outcomes.length) outcDivs.forEach(d => originals.outcomes.push(d.innerHTML));
    outcDivs.forEach((d, i) => { if (blindOutcomes[i]) d.innerHTML = blindState.outcomes ? blindOutcomes[i] : originals.outcomes[i]; });

    // Strip indicator
    document.querySelector('.strip')?.classList.toggle('blinded-strip', blindActive);
    document.getElementById('blindPanel').classList.remove('open');
}

// Close panel on outside click
document.addEventListener('click', e => {
    const p = document.getElementById('blindPanel'), f = document.getElementById('blindFab');
    if (p && p.classList.contains('open') && !p.contains(e.target) && !f.contains(e.target)) p.classList.remove('open');
});

function openPop(d){const p=document.getElementById('pop');document.getElementById('popN').textContent=d.name;let b='<div><strong style="color:var(--a)">'+(d.level||'')+'</strong>';if(d.ms==='matched')b+=' ¬∑ <span style="color:var(--g)">‚úì Matched to role</span>';if(d.vf)b+=' <span class="vb'+(d.vf==='cert'?' cert':d.vf==='edu'?' edu':'')+'"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>'+(d.vfLabel||'Verified')+'</span>';b+='</div>';if(d.ev)b+='<div class="pop-ev"><div class="pop-ev-l">Evidence</div>'+d.ev+'</div>';document.getElementById('popB').innerHTML=b;p.classList.add('open');p.scrollIntoView({behavior:'smooth',block:'nearest'})}

function renderSk(){
const el=document.getElementById('skL');
const matched=US.filter(s=>MS.has(s.n));
const rest=US.filter(s=>!MS.has(s.n)).slice(0,10);
const vbSvg='<svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>';
el.innerHTML=[...matched,...rest].map(s=>{const im=MS.has(s.n),lp={Mastery:100,Expert:80,Advanced:60,Proficient:40,Novice:20}[s.l]||0,sc=im?'var(--g)':'var(--tm)';
const vbHtml=s.vf?'<span class="vb'+(s.vf==='cert'?' cert':s.vf==='edu'?' edu':'')+'">'+vbSvg+(s.vfLabel||'Verified')+'</span>':'';
return`<div class="sk-r" onclick="this.classList.toggle('ex')"><div class="sk-top"><div class="sk-dot" style="background:${sc}"></div><div class="sk-nm">${s.n}${vbHtml}</div><div class="sk-rq">${im?'Matched':'Surplus'}</div><div class="sk-bars"><div class="sk-bar-r"><div style="width:36px;text-align:right">Level</div><div class="sk-bar-t"><div class="sk-bar-f" style="width:${lp}%;background:var(--a)"></div></div></div></div><div class="sk-chev">‚ñæ</div></div><div class="sk-det"><div style="margin-bottom:6px"><strong style="color:var(--a)">${s.l}</strong>${vbHtml}</div>${s.ev?`<div class="sk-ev"><div class="sk-ev-l">Evidence</div>${s.ev}</div>`:''}</div></div>`}).join('')}

function renderGaps(){document.getElementById('gapL').innerHTML=gapData.map(g=>`<div class="gap-c"><div class="gap-h"><div class="gap-n">${g.n}</div><div class="sk-rq" style="color:var(--r);border:1px solid var(--r);background:transparent">${g.rq}</div></div><div class="gap-br">${g.br}</div><div class="gap-adj"><span style="font-size:.72em;color:var(--tm);margin-right:4px">Bridge skills:</span>${g.adj.map(a=>`<span class="gap-tag">${a}</span>`).join('')}</div></div>`).join('')}

function renderDom(){document.getElementById('domL').innerHTML=doms.map(d=>`<div class="dom-r"><div class="dom-n" style="color:${d.cl}">${d.n}</div><div class="dom-bt"><div class="dom-bf" style="width:${(d.c/d.m)*100}%;background:${d.cl}"></div></div><div class="dom-c">${d.c} skills</div></div>`).join('')}

function rx(b){document.querySelectorAll('.rbtn').forEach(x=>x.classList.remove('sel'));b.classList.add('sel')}
function go(id){document.getElementById(id)?.scrollIntoView({behavior:'smooth',block:'start'})}
const obs=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting)document.querySelectorAll('.nav-a').forEach(l=>l.classList.toggle('on',l.getAttribute('onclick')?.includes(e.target.id)))})},{threshold:.2});
document.querySelectorAll('section[id],.hero').forEach(s=>obs.observe(s));

renderSk();renderGaps();renderDom();initSN();initVN();
window.addEventListener('resize',()=>{if(curNetMode==='match')initSN();else initYouNet();initVN()});
</script>
</body>
</html>
